<div class="search-container">
    <div class="input-filter">
        <i class="fa fa-search"></i>
        <input [ngModel]="currentFilter" (ngModelChange)="onFilterChanged($event)" type="text" placeholder="Search pokemons"  id="filter"/>
    </div>
</div>

<div *ngIf="pokemonList.length>0" class="table-header">
  <div class="legend-resume">
      <span><strong>{{ pokemonList.length }}</strong></span>
      <span>Pokemons Found</span>
  </div>
  <select class="select-items" [(ngModel)]="config.itemsPerPage" (change)="onItemsPerPageChanged($event.target.value)">
    <option *ngFor="let items of itemPerPageOptions" [value]=items>
        Show {{items}}
    </option>
  </select>
</div>


<table class="pokemon-table" cellspacing="0">
    <thead>
        <tr>
            <th scope="col" class="title"></th>
            <th scope="col" class="title" (click)="sortPokemonListBy('name')">name<i class="fa fa-sort"></i></th>
            <th scope="col" class="title">image</th>
            <th scope="col" class="title" (click)="sortPokemonListBy('types')">type<i class="fa fa-sort"></i></th>
            <th scope="col" class="title" (click)="sortPokemonListBy('height')">height<i class="fa fa-sort"></i></th>
            <th scope="col" class="title" (click)="sortPokemonListBy('weight')">weight<i class="fa fa-sort"></i></th>
            <th scope="col" class="title" (click)="sortPokemonListBy('base_experience')">experience<i class="fa fa-sort"></i></th>
            <th scope="col" class="title" (click)="sortPokemonListBy('abilities')">abilities<i class="fa fa-sort"></i></th>
            <th scope="col" colspan="3" class="title">stats</th>
        </tr>
        <tr>
            <td colspan="8"></td>
            <th class="title" (click)="sortPokemonListBy('attack')">attack<i class="fa fa-sort"></i></th>
            <th class="title" (click)="sortPokemonListBy('defense')">defense<i class="fa fa-sort"></i></th>
            <th class="title" (click)="sortPokemonListBy('speed')">speed<i class="fa fa-sort"></i></th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let pokemon of pokemonList | paginate: config">
            <td>
                <label class="checkbox-group">
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
            </td>
            <td>{{pokemon['name']}}</td>
            <td><img [src]="pokemon['sprites']['front_default']" [alt]="pokemon['name']" /></td>
            <td>
                <span *ngFor="let type of pokemon['types']">{{type.type.name}}</span>
            </td>
            <td>{{pokemon.height / 10}} m</td>
            <td>{{pokemon.weight / 10}} Kg</td>
            <td>{{pokemon['base_experience']}}</td>
            <td>
                <span *ngFor="let ability of pokemon['abilities']">{{ability.ability.name}}</span>
            </td>
            <td>
                <app-pokemon-statistics [baseStat]="pokemon['stats'][4]['base_stat']"></app-pokemon-statistics>
            </td>
            <td>
                <app-pokemon-statistics [baseStat]="pokemon['stats'][3]['base_stat']"></app-pokemon-statistics>
            </td>
            <td>
                <app-pokemon-statistics [baseStat]="pokemon['stats'][0]['base_stat']"></app-pokemon-statistics>
            </td>
        </tr>
    </tbody>
</table>
<div class="footer-table">
  <div class="pagination">
      <pagination-template #p="paginationApi" [id]="config.id" (pageChange)="config.currentPage = $event">
        <div class="custom-pagination">
          <div class="pagination-previous" [class.disabled]="p.isFirstPage()">
            <span *ngIf="!p.isFirstPage()" (click)="p.previous()">Previous</span>
            <span *ngIf="p.isFirstPage()" (click)="p.previous()" class="disable">Previous</span>
            </div> 
            <div class="page-number" *ngFor="let page of p.pages" [class.current]="p.getCurrent() === page.value">
                  <span (click)="p.setCurrent(page.value)" *ngIf="p.getCurrent() !== page.value">{{page.label}}</span>
                <div *ngIf="p.getCurrent() === page.value">
                  <span class="current-page">{{page.label}}</span>
                </div>
            </div>
            <div class="pagination-next" [class.disabled]="p.isLastPage()">
              <span *ngIf="!p.isLastPage()" (click)="p.next()">Next</span>
              <span *ngIf="p.isLastPage()" (click)="p.next()" class="disable">Next</span>
            </div>
        </div>
      </pagination-template>
  </div>
  <div>
    <select class="select-pagination" (change)="onPageChanged($event.target.value)">
      <option *ngFor="let page of p.pages" 
      [value]="page.label" 
      [attr.selected]="config.currentPage==page.label ? true : null"
      >{{page.label}}</option>
    </select>
  </div>
</div>

